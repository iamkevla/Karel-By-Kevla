<!DOCTYPE html>
<html>
	<head>
		<meta charset = "utf-8" >
		<title>Karel by Kevla</title>
		<link href="karel.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">
	</head>
	<body>
		<h1>Karel by Kevla</h1>
		
		<div>
			<div  style="float: right;"><button id="play" >Run</button> <button id="init" >Reset</button></div>
			<form>
				<textarea name="code" id="code" ></textarea>
			</form>
		</div>
		<div id="footer" style="float:none;" >
			<div id="myWorld" >Creating Karels World...</div>

			<div id="instructions" >
				<h3>karel can...</h3>
				<div style="float:left;">
					<ul>
						<li>move();</li>
						<li>turnLeft();</li>
						<li>pickBeeper();</li>
						<li>putBeeper();</li>
					</ul>
				</div>
				<div style="float:left;" >
					<ul>
						<li>frontIsClear()</li>
						<li>leftIsClear()</li>
						<li>rightIsClear()</li>
						<li>beepersPresent()</li>
						<li>facingNorth()</li>
						<li>facingSouth()</li>
						<li>facingEast()</li>
						<li>facingWest()</li>
					</ul>
				</div>	
				<div style="float:left;" >
					<ul>
						<li>frontIsBlocked()</li>
						<li>leftIsBlocked()</li>
						<li>rightIsBlocked()</li>
						<li>noBeepersPresent()</li>
						<li>notFacingNorth()</li>
						<li>notFacingSouth()</li>
						<li>notFacingEast()</li>
						<li>notFacingWest()</li>
					</ul>
				</div>	
				<div style="float:left; width:220px;" >
					<ul>
						<li style="word-wrap: break-word" >var func = function () { statements };</li>
						<li style="word-wrap: break-word" >if ( condition ) { statements } else { statements }</li>
						<li style="word-wrap: break-word" >while ( condition ) { statements }</li>
					</ul>
				</div>	
			</div>
		</div>

		<!-- javascript code here -->
		<script type="text/javascript" src="http://codemirror.net/lib/codemirror.js"></script>
    	<script type="text/javascript" src="http://codemirror.net/mode/javascript/javascript.js"></script>
    	<script type="text/javascript" src="http://codemirror.net/lib/util/foldcode.js"></script>
    	<script type="text/javascript"> 
			var foldFunc = CodeMirror.newFoldFunction(CodeMirror.braceRangeFinder);
			var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
			  	mode: "javascript",
			  	lineNumbers: true,
			  	lineWrapping: true,
			  	onGutterClick: foldFunc,	
			  	onCursorActivity: function() {
			    	editor.setLineClass(hlLine, null);
			    	hlLine = editor.setLineClass(editor.getCursor().line, "activeline");
			  	},
			  	extraKeys: {"F11": toggleFullscreenEditing, "Esc": toggleFullscreenEditing}
			});
			var hlLine = editor.setLineClass(0, "activeline");

			    function toggleFullscreenEditing() {
			        var editorDiv = $('.CodeMirror-scroll');
			        if (!editorDiv.hasClass('fullscreen')) {
			            toggleFullscreenEditing.beforeFullscreen = { height: editorDiv.height(), width: editorDiv.width() }
			            editorDiv.addClass('fullscreen');
			            editorDiv.height('100%');
			            editorDiv.width('100%');
			            editor.refresh();
			        }
			        else {
			            editorDiv.removeClass('fullscreen');
			            editorDiv.height(toggleFullscreenEditing.beforeFullscreen.height);
			            editorDiv.width(toggleFullscreenEditing.beforeFullscreen.width);
			            editor.refresh();
			        }
			    }
		</script>
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js" ></script>
		<script type="text/javascript" src="karel.js" ></script>
		<script type="text/javascript">
			<!--
 			$(document).ready(function(){
				
				if ( localStorage !== undefined ) {
					editor.setValue(localStorage.getItem('mycode') || snippet);
				} else {	
					editor.setValue( snippet );	
				}

				var myKarel = Object.create(karel);

				myKarel.init();

				$('#play').click(function(){
					if ( localStorage !== undefined ) {
						localStorage.setItem('mycode', editor.getValue());
					}	
					myKarel.play();
					drawWorld(myKarel,$('#myWorld'));
				});

				$('#init').click(function(){
					myKarel.init();
					world = setWorld();
					drawWorld(myKarel,$('#myWorld'));
				});
	
				drawWorld(myKarel,$('#myWorld'));

			});//document ready
			-->
		</script>
	</body>	
</html>